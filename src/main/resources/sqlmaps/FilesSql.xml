<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sqlmaps.FilesSql">
	<select id="selectFiles">
		/* 파일 목록 조회 */
		SELECT
			  IDX                as "idx"
			, ORIGINAL_FILE_NAME as "originalFileName"
			, ORIGINAL_FILE_EXT  as "originalFileExt" 
			, SAVED_FILE_NAME    as "savedFileName"    
			, SAVED_FILE_PATH    as "savedFilePath"   
		FROM
			FILES
		<where>
			AND IDX = #{idx}
		</where>
		ORDER BY ORDERED ASC
	</select>

	<select id="selectFile">
		/* 파일 목록 조회 */
		SELECT
			  IDX                as "idx"
			, ORIGINAL_FILE_NAME as "originalFileName"
			, ORIGINAL_FILE_EXT  as "originalFileExt" 
			, SAVED_FILE_NAME    as "savedFileName"    
			, SAVED_FILE_PATH    as "savedFilePath"   
		FROM
			FILES
		<where>
			AND IDX = #{idx}
		</where>
		ORDER BY ORDERED ASC
	</select>

	<insert id="insertFile">
		/* 파일 입력 */
		INSERT INTO
			FILES
			(
				  IDX               
				, ORIGINAL_FILE_NAME
				, ORIGINAL_FILE_EXT 
				, SAVED_FILE_NAME   
				, SAVED_FILE_PATH   
			)
		VALUES 
			(
				 #{idx,jdbcType=VARCHAR}   
				,#{originalFileName,jdbcType=VARCHAR} 
				,#{originalFileExt,jdbcType=VARCHAR} 
				,#{savedFileName,jdbcType=VARCHAR} 
				,#{savedFilePath,jdbcType=VARCHAR}				
			)   
	</insert>

	<update id="updateFile">
		/* 파일 수정 */
		UPDATE
			FILES
		<set>
			<if test="idx              != null"> IDX                = #{idx}   ,  </if>
			<if test="originalFileName != null"> ORIGINAL_FILE_NAME = #{originalFileNamem}   ,  </if>
			<if test="originalFileExt  != null"> ORIGINAL_FILE_EXT  = #{originalFileExt}    ,  </if>
			<if test="savedFileName    != null"> SAVED_FILE_NAME    = #{savedFileName}    ,  </if>
			<if test="savedFilePath    != null"> SAVED_FILE_PATH    = #{savedFilePath}   ,  </if>
		</set>
		<where>
				AND IDX = #{idx}
		</where>
	</update>

	<delete id="deleteFile">
		/* 파일 삭제 */
		DELETE FROM
			FILES
		<where>
				AND IDX = #{idx}
		</where>
	</delete>


</mapper>